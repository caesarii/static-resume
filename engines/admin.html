<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>简历管理主页</title>
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <link rel="stylesheet" href="/static/css/basic.css">
    <link rel="stylesheet" href="/static/css/admin.css">
</head>
<body>
<div class="container">
    <header class="header">
        <div class="header-inner">
            <div class="header-logo"></div>
            <div class="header-title">简历管理系统</div>
        </div>
    </header>
    <main class="main">
        <div class="main-inner">
            <div class="tool-bar">
                <form action="" class="layui-form" lay-filter="search-form">
                    <a class="layui-btn staff-btn" >添加应聘者</a>

                    <!--搜索按钮-->
                    <button class="layui-btn fr" lay-submit lay-filter="search-form">查询</button>

                    <!--搜索框-->
                    <input type="text" name="keyword"
                           placeholder="姓名、手机号或职位"
                           autocomplete="off"
                           class="layui-input tool-item-search fr"
                    >

                    <!--所有状态-->
                    <div class="tool-item fr">
                        <select  name="state">
                            <option value="all">所有状态</option>
                            <option value="wait">未邀约</option>
                            <option value="already">已邀约</option>
                            <option value="registered">已填表</option>
                        </select>
                    </div>

                    <!--结束时间-->
                    <input type="text" class="layui-input tool-item fr" name="endTime" id="id-end-time" placeholder="面试结束时间" lay-verify="date">

                    <!--开始时间-->
                    <input type="text" class="layui-input tool-item fr" name="startTime" id="id-start-time" placeholder="面试开始时间" lay-verify="date">

                    <!--表格导出-->
                    <div style="margin-top: 10px;">
                        <button class="layui-btn fr">导出</button>
                    </div>

                </form>
            </div>

            <!--表格-->
        </div>
    </main>

    <!--弹窗-->
    <div class="modal">
        <!--添加应聘者-->
        <div class="staff-modal hide" >
            <form class="layui-form" action="" lay-filter="add-applicant-form">
                <div class="layui-form-item">
                    <label class="layui-form-label left">姓名</label>
                    <div class="layui-input-block">
                        <input type="text" name="name" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">手机号</label>
                    <div class="layui-input-block">
                        <input type="text" name="phone" required  lay-verify="required|phone" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">邮箱</label>
                    <div class="layui-input-block">
                        <input type="text" name="email" required  lay-verify="required|email" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">应聘职位</label>
                    <div class="layui-input-block">
                        <input type="text" name="pos" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit lay-filter="add-applicant-form">保存</button>
                    </div>
                </div>
            </form>

        </div>

        <!--邀约-->
        <div class="invite-modal hide">
            <form class="layui-form" action="">
                <div class="layui-form-item">
                    <input type="text" class="layui-input" id="id-invite-time" placeholder="选择时间">

                </div>
                <div class="layui-form-item" style="text-align: center;">
                    <button class="layui-btn">发送短信</button>
                    <button class="layui-btn">发送邮件</button>
                    <a href="" class="layui-btn layui-btn-primary">编辑邮件模板</a>
                </div>


            </form>
        </div>

        <!--应聘者详情-->
        <div class="detail-modal hide">
            <form class="layui-form" action="">

                <div class="layui-form-item">
                    <label class="layui-form-label left">姓名</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">手机号</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">邮箱</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">应聘职位</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label left">历史邀约记录</label>
                    <label class="layui-form-label left">面试时间</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required  lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <a href="" class="layui-btn layui-btn-primary">下载简历附件</a>
                </div>
            </form>
        </div>

    </div>
</div>

<script type="text/html" id="toolbar">
    <a class="layui-btn layui-btn-primary layui-btn-mini" lay-event="invite">邀约</a>
    <a class="layui-btn layui-btn-primary layui-btn-mini" lay-event="download">下载</a>
    <a class="layui-btn layui-btn-primary layui-btn-mini" lay-event="print">打印</a>
    <a class="layui-btn layui-btn-primary layui-btn-mini" lay-event="detail">详情</a>
</script>
<script src="/static/js/nunjucks.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script src="/static/layui/layui.js"></script>
<script src="/static/js/admin.js"></script>
<script>
    nunjucks.configure('/static/templates', {autoescape: true})
    nunjucks.render('admin.html', {
        'name': 'qinghe'
    }, function(err, res) {
        $('.main-inner').append(res)
    })


    var success = function(data) {
        var code = data.code
        if(code) {
            window.location.href = ''
        } else {
            // 插入错误提示
        }
    }

    // 查询
    layui.use('form', function(){
        var form = layui.form;

        //监听提交
        form.on('submit(search-form)', function(data){
            console.log('submit', data)
//            layer.msg(JSON.stringify(data.field));
            $.ajax({
                type: 'post',
                url: '/',
                data: data.field,
                success: success
            })
            return false;
        });
    });

    // add applicant
    layui.use('form', function(){
        var form = layui.form;
        form.on('submit(add-applicant-form)', function(data){
            console.log('submit', data)
//            layer.msg(JSON.stringify(data.field));
            $.ajax({
                type: 'post',
                url: '/',
                data: data.field,
                success: success
            })
            return false;
        });
    });

</script>
</body>
</html>