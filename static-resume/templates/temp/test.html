<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/static/layui/css/layui.css">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>


<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
    <!--<legend>基本表格</legend>-->
<!--</fieldset>-->

<!--<table class="layui-table" lay-data="{height:313, url:'/demo/table/user/'}">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th lay-data="{field:'id', width:80, sort: true}">ID</th>-->
        <!--<th lay-data="{field:'username', width:80}">用户名</th>-->
        <!--<th lay-data="{field:'sex', width:80, sort: true}">性别</th>-->
        <!--<th lay-data="{field:'city', width:80}">城市</th>-->
        <!--<th lay-data="{field:'sign', width:177}">签名</th>-->
        <!--<th lay-data="{field:'experience', width:80, sort: true}">积分</th>-->
        <!--<th lay-data="{field:'score', width:80, sort: true}">评分</th>-->
        <!--<th lay-data="{field:'classify', width:80}">职业</th>-->
        <!--<th lay-data="{field:'wealth', width:135, sort: true}">财富</th>-->
    <!--</tr>-->
    <!--</thead>-->
<!--</table>-->

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>数据操作和左右列固定</legend>
</fieldset>
<div class="layui-btn-group demoTable">
    <button class="layui-btn" data-type="getCheckData">获取选中行数据</button>
    <button class="layui-btn" data-type="getCheckLength">获取选中数目</button>
    <button class="layui-btn" data-type="isAll">验证是否全选</button>
</div>
<table id="example" class="layui-table" lay-data="{width: 892, height:332, page:true, id:'test1'}">
    <thead>
    <tr>
        <th lay-data="{checkbox:true, fixed: true}"></th>
        <th lay-data="{field:'id', width:80, sort: true, fixed: true}">ID</th>
        <th lay-data="{field:'username', width:80}">用户名</th>
        <th lay-data="{field:'sex', width:80, sort: true}">性别</th>
        <th lay-data="{field:'city', width:80}">城市</th>
        <th lay-data="{field:'sign', width:177}">签名</th>
        <th lay-data="{field:'experience', width:80, sort: true}">积分</th>

        <th lay-data="{field:'classify', width:80}">职业</th>
        <th lay-data="{field:'wealth', width:135, sort: true}">财富</th>
        <th lay-data="{field:'score', width:80, sort: true, fixed: 'right'}">评分</th>
        <th lay-data="{fixed: 'right', width:160, align:'center', toolbar: '#barDemo'}"></th>
    </tr>
    </thead>
</table>


<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
    <!--<legend>表格搜索与重载</legend>-->
<!--</fieldset>-->
<!--<div class="demoTable">-->
    <!--搜索ID：-->
    <!--<div class="layui-inline">-->
        <!--<input class="layui-input" name="id" id="demoReload">-->
    <!--</div>-->
    <!--<button class="layui-btn" data-type="reload">搜索</button>-->
<!--</div>-->

<!--<table class="layui-hide" id="LAY_table_user" lay-filter="user"></table>-->

<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-primary layui-btn-mini" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-mini" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-mini" lay-event="del">删除</a>
</script>

<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
    <!--<legend>自定义单元格模板与样式</legend>-->
<!--</fieldset>-->
<!--<table class="layui-table" lay-data="{height:315, url:'/demo/table/user/', page:true, id:'test2'}">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th lay-data="{field:'id', width:80, sort: true}">ID</th>-->
        <!--<th lay-data="{field:'username', width:80, templet: '#usernameTpl'}">用户名</th>-->
        <!--<th lay-data="{field:'sex', width:80, sort: true, templet: '#sexTpl'}">性别</th>-->
        <!--<th lay-data="{field:'city', width:80}">城市</th>-->
        <!--<th lay-data="{field:'sign', width:177}">签名</th>-->
        <!--<th lay-data="{field:'experience', width:80, sort: true, style:'background-color: #e2e2e2;'}">积分</th>-->
        <!--<th lay-data="{field:'score', width:80, sort: true}">评分</th>-->
        <!--<th lay-data="{field:'classify', width:80, style:'background-color: #5FB878; color: #fff;'}">职业</th>-->
        <!--<th lay-data="{field:'wealth', width:135, sort: true}">财富</th>-->
        <!--<th lay-data="{fixed: 'right', width:100, align:'center', toolbar: '#barDemo1'}"></th>-->
    <!--</tr>-->
    <!--</thead>-->
<!--</table>-->

<!--<script type="text/html" id="usernameTpl">-->
    <!--<a href="/?table-demo-id={{d.id}}" class="layui-table-link" target="_blank">{{ d.username }}</a>-->
<!--</script>-->


<!--<script type="text/html" id="barDemo1">-->
    <!--<a class="layui-btn layui-btn-mini" lay-event="edit">审核</a>-->
<!--</script>-->


<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
    <!--<legend>单元格事件</legend>-->
<!--</fieldset>-->
<!--点击下面表格中的【签名】，以演示单元格事件-->
<!--<table class="layui-table" lay-data="{height: 196, url:'/demo/table/user/'}" lay-filter="demoEvent">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th lay-data="{field:'id', width:80}">ID</th>-->
        <!--<th lay-data="{field:'username', width:80}">用户名</th>-->
        <!--<th lay-data="{field:'sex', width:80}">性别</th>-->
        <!--<th lay-data="{field:'city', width:80}">城市</th>-->
        <!--<th lay-data="{field:'sign', width:177, event: 'setSign', style:'cursor: pointer;'}">签名</th>-->
        <!--<th lay-data="{field:'experience', width:80}">积分</th>-->
        <!--<th lay-data="{field:'score', width:80}">评分</th>-->
        <!--<th lay-data="{field:'classify', width:80}">职业</th>-->
        <!--<th lay-data="{field:'wealth', width:135}">财富</th>-->
    <!--</tr>-->
    <!--</thead>-->
<!--</table>-->


<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
    <!--<legend>单元格模板可编辑</legend>-->
<!--</fieldset>-->
<!--<table class="layui-table" lay-data="{height:313, url:'/test/table/demo1.json', id:'test3'}">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th lay-data="{field:'id', width:80, sort: true}">ID</th>-->
        <!--<th lay-data="{field:'username', width:120, sort: true, edit: 'text'}">用户名</th>-->
        <!--<th lay-data="{field:'email', width:150, edit: 'text'}">邮箱</th>-->
        <!--<th lay-data="{field:'sex', width:80, edit: 'text'}">性别</th>-->
        <!--<th lay-data="{field:'city', width:100, edit: 'text'}">城市</th>-->
        <!--<th lay-data="{field:'sign', width:150, edit: 'text'}">签名</th>-->
        <!--<th lay-data="{field:'experience', width:80, sort: true, edit: 'text'}">积分</th>-->
        <!--<th lay-data="{field:'ip', width:120, edit: 'text'}">IP</th>-->
        <!--<th lay-data="{field:'logins', width:100, edit: 'text'}">登入次数</th>-->
        <!--<th lay-data="{field:'joinTime', width:120, edit: 'text'}">加入时间</th>-->
    <!--</tr>-->
    <!--</thead>-->
<!--</table>-->


<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">-->
    <!--<legend>如果单元格文本超出长度，可点击单元格查看全部</legend>-->
<!--</fieldset>-->
<!--<table class="layui-table" lay-data="{height:196, url:'/demo/table/long'}">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th lay-data="{field:'username', width:120}">用户名</th>-->
        <!--<th lay-data="{field:'sex', width:80}">性别</th>-->
        <!--<th lay-data="{field:'city', width:100}">城市</th>-->
        <!--<th lay-data="{field:'sign', width:150}">签名</th>-->
    <!--</tr>-->
    <!--</thead>-->
<!--</table>-->

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>展示已知数据</legend>
</fieldset>

<table id="test2"></table>


<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>复杂表头（可无限极）</legend>
</fieldset>
<table class="layui-table" lay-data="{height:235, url:'/test/table/demo2.json', page: true, limit: 6}">
    <thead>
    <tr>
        <th lay-data="{field:'username', width:80}" rowspan="2">联系人</th>
        <th lay-data="{field:'amount', width:120}" rowspan="2">金额</th>
        <th lay-data="{align:'center'}" colspan="3">地址</th>
    </tr>
    <tr>
        <th lay-data="{field:'province', width:80}">省</th>
        <th lay-data="{field:'city', width:120}">市</th>
        <th lay-data="{field:'county', width:300}">详细</th>
    </tr>
    </thead>
</table>
<p style="color: #999">注：该例子读取的是静态模拟数据</p>


<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
    <legend>转化静态表格</legend>
</fieldset>

<div class="layui-btn-group demoTable">
    <button class="layui-btn" data-type="parseTable">转化为数据表格</button>
</div>
<table class="layui-table" lay-skin="line" lay-filter="parse-table-demo">
    <thead>
    <tr>
        <th lay-data="{field:'username', width:200}">昵称</th>
        <th lay-data="{field:'joinTime', width:150}">加入时间</th>
        <th lay-data="{field:'sign', width:300}">签名</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>贤心1</td>
        <td>2016-11-28</td>
        <td>人生就像是一场修行a</td>
    </tr>
    <tr>
        <td>贤心2</td>
        <td>2016-11-29</td>
        <td>人生就像是一场修行b</td>
    </tr>
    <tr>
        <td>贤心3</td>
        <td>2016-11-30</td>
        <td>人生就像是一场修行c</td>
    </tr>
    </tbody>
</table>

<p style="color: #FF5722">为节省版面，table模块的功能就不一一列举了，建议细读文档。</p>

<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script src="/static/layui/layui.js"></script>

<script>
    layui.use('table', function(){
        var table = layui.table;

        //方法级渲染
//        var ins1 = table.render({
//            elem: '#LAY_table_user'
//            ,url: '/demo/table/user/'
//            ,cols: [[
//                {checkbox: true, fixed: true}
//                ,{field:'id', title: 'ID', width:80, sort: true, fixed: true}
//                ,{field:'username', title: '用户名', width:80}
//                ,{field:'sex', title: '性别', width:80, sort: true}
//                ,{field:'city', title: '城市', width:80}
//                ,{field:'sign', title: '签名', width:177}
//                ,{field:'experience', title: '积分', sort: true, width:80}
//                ,{field:'score', title: '评分', sort: true, width:80}
//                ,{field:'classify', title: '职业', width:80}
//                ,{field:'wealth', title: '财富', sort: true, width:135}
//            ]]
//            ,page: true
//            ,height: 315
//        });

        //展示已知数据
        table.render({
            elem: '#example'
            ,data: [{
                "id": "10001"
                ,"username": "杜甫"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "116"
                ,"ip": "192.168.0.8"
                ,"logins": "108"
                ,"joinTime": "2016-10-14"
            }, {
                "id": "10002"
                ,"username": "李白"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "12"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
                ,"LAY_CHECKED": true
            }, {
                "id": "10003"
                ,"username": "王勃"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "65"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
            }, {
                "id": "10004"
                ,"username": "贤心"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "666"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
            }, {
                "id": "10005"
                ,"username": "贤心"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "86"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
            }, {
                "id": "10006"
                ,"username": "贤心"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "12"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
            }, {
                "id": "10007"
                ,"username": "贤心"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "16"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
            }, {
                "id": "10008"
                ,"username": "贤心"
                ,"email": "xianxin@layui.com"
                ,"sex": "男"
                ,"city": "浙江杭州"
                ,"sign": "人生恰似一场修行"
                ,"experience": "106"
                ,"ip": "192.168.0.8"
                ,"logins": "106"
                ,"joinTime": "2016-10-14"
            }]
            ,height: 198
//            ,cols: [[ //标题栏
//                {checkbox: true, LAY_CHECKED: true}
//                ,{field: 'id', title: 'ID', width: 80, sort: true}
//                ,{field: 'username', title: '用户名', width: 120}
//                ,{field: 'email', title: '邮箱', width: 150}
//                ,{field: 'sign', title: '签名', width: 150}
//                ,{field: 'sex', title: '性别', width: 80}
//                ,{field: 'city', title: '城市', width: 100}
//                ,{field: 'experience', title: '积分', width: 80, sort: true}
//            ]]
            ,skin: 'row' //表格风格
            ,even: true
            ,page: true //是否显示分页
            ,limits: [3,5,10]
            ,limit: 3 //每页默认显示的数量
        });

        //监听表格复选框选择
        table.on('checkbox(test1)', function(obj){
            console.log(obj)
        });

        //监听单元格编辑
        table.on('edit(test3)', function(obj){
            var value = obj.value //得到修改后的值
                ,data = obj.data //得到所在行所有键值
                ,field = obj.field; //得到字段

            data[field] = value; //更新缓存中的值

            layer.msg(value);
        });

        //监听工具条
        table.on('tool(test1)', function(obj){
            var data = obj.data;
            if(obj.event === 'detail'){
                layer.msg('ID：'+ data.id + ' 的查看操作');
            } else if(obj.event === 'del'){
                layer.confirm('真的删除行么', function(index){
                    obj.del();
                    layer.close(index);
                });
            } else if(obj.event === 'edit'){
                layer.alert('编辑行：<br>'+ JSON.stringify(data))
            }
        });

        //监听单元格事件
        table.on('tool(demoEvent)', function(obj){
            var data = obj.data;
            if(obj.event === 'setSign'){
                layer.prompt({
                    formType: 2
                    ,title: '修改 ID 为 ['+ data.id +'] 的用户签名'
                    ,value: data.sign
                }, function(value, index){
                    layer.close(index);

                    //这里一般是发送修改的Ajax请求

                    //同步更新表格和缓存对应的值
                    obj.update({
                        sign: value
                    });
                });
            }
        });


        var $ = layui.$, active = {
            getCheckData: function(){
                var checkStatus = table.checkStatus('test1')
                    ,data = checkStatus.data;
                layer.alert(JSON.stringify(data));
            }
            ,getCheckLength: function(){
                var checkStatus = table.checkStatus('test1')
                    ,data = checkStatus.data;
                layer.msg('选中了：'+ data.length + ' 个');
            }
            ,isAll: function(){
                var checkStatus = table.checkStatus('test1');
                layer.msg(checkStatus.isAll ? '全选': '未全选')
            }
            ,reload: function(){
                var demoReload = $('#demoReload');

                ins1.reload({
                    where: {
                        key: {
                            id: demoReload.val()
                        }
                    }
                });
            }
            ,parseTable: function(){
                table.init('parse-table-demo');
            }
        };

        $('.demoTable .layui-btn').on('click', function(){
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });
    });
</script>

</body>
</html>